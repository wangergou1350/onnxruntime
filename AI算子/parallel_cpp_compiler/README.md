# Parallel C++ Compiler

ä¸€ä¸ªå°†C++ä»£ç è½¬æ¢ä¸ºCä»£ç çš„å¹¶è¡Œç¼–è¯‘å™¨ï¼Œä¸“é—¨è®¾è®¡ç”¨äºæ”¯æŒC++çš„æ ¸å¿ƒè¯­æ³•å’Œå¹¶è¡Œè®¡ç®—æ‰©å±•ã€‚

## ğŸš€ é¡¹ç›®æ¦‚è§ˆ

è¿™æ˜¯ä¸€ä¸ªåˆ›æ–°çš„C++åˆ°Cçš„è½¬è¯‘å™¨ï¼Œæ”¯æŒç°ä»£C++æ ¸å¿ƒç‰¹æ€§å’Œä¸“ä¸ºå¹¶è¡Œè®¡ç®—è®¾è®¡çš„è¯­è¨€æ‰©å±•ã€‚ç¼–è¯‘å™¨é‡‡ç”¨ç»å…¸çš„å››é˜¶æ®µæ¶æ„ï¼šè¯æ³•åˆ†æ â†’ è¯­æ³•åˆ†æ â†’ è¯­ä¹‰åˆ†æ â†’ ä»£ç ç”Ÿæˆï¼Œç”Ÿæˆé«˜è´¨é‡çš„Cä»£ç ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- **ğŸ”§ å®Œæ•´çš„C++æ ¸å¿ƒè¯­æ³•æ”¯æŒ**ï¼šç±»ã€ç»§æ‰¿ã€å¤šæ€ã€è¿ç®—ç¬¦é‡è½½
- **âš¡ å¹¶è¡Œè®¡ç®—æ‰©å±•**ï¼šparallel_classã€parallel_forã€thread_safe
- **ğŸ¯ é«˜è´¨é‡ä»£ç ç”Ÿæˆ**ï¼šä¼˜åŒ–çš„Cä»£ç è¾“å‡ºï¼Œæ”¯æŒè™šå‡½æ•°è¡¨å’Œçº¿ç¨‹å®‰å…¨
- **ğŸ›¡ï¸ å¼ºå¥çš„é”™è¯¯å¤„ç†**ï¼šè¯¦ç»†çš„è¯­æ³•å’Œè¯­ä¹‰é”™è¯¯æŠ¥å‘Š
- **ğŸ“Š è°ƒè¯•å·¥å…·**ï¼šASTå¯è§†åŒ–ã€tokenåˆ†æã€è¯¦ç»†ç¼–è¯‘è¿‡ç¨‹

## ğŸ—ï¸ ç¼–è¯‘å™¨æ¶æ„

```
C++ æºä»£ç 
     â†“
ğŸ“ è¯æ³•åˆ†æå™¨ (lexer.c)     - å…³é”®å­—ã€æ“ä½œç¬¦ã€æ ‡è¯†ç¬¦è¯†åˆ«
     â†“
ğŸŒ³ è¯­æ³•åˆ†æå™¨ (parser.c)    - é€’å½’ä¸‹é™è§£æã€ASTæ„å»º
     â†“
ğŸ” è¯­ä¹‰åˆ†æå™¨ (semantic.c)  - ç±»å‹æ£€æŸ¥ã€ç¬¦å·è¡¨ç®¡ç†
     â†“
âš™ï¸ ä»£ç ç”Ÿæˆå™¨ (codegen.c)   - C++åˆ°Cè½¬æ¢ã€å¹¶è¡Œä»£ç ç”Ÿæˆ
     â†“
æ ‡å‡† C ä»£ç 
```
    Point(int x, int y) {
        this->x = x;
        this->y = y;
    }
    
    ~Point() {
        // ææ„å‡½æ•°
    }
    
    int getX() {
        return x;
    }
    
    Point operator+(Point other) {
        return Point(x + other.x, y + other.y);
    }
};
```

### ç»§æ‰¿å’Œå¤šæ€
```cpp
class Shape {
public:
    virtual double area() {
        return 0.0;
    }
    
    virtual ~Shape() {}
};

class Circle : public Shape {
private:
    double radius;

public:
    Circle(double r) {
        radius = r;
    }
    
    virtual double area() {
        return 3.14159 * radius * radius;
    }
};
```

### å¹¶è¡Œç¼–ç¨‹æ‰©å±•
```cpp
parallel_class Matrix {
private:
    int data[100][100];
    
public:
    Matrix() {
        parallel_for(0, 100, {
            for (int j = 0; j < 100; j++) {
                data[i][j] = 0;
            }
        });
    }
    
    thread_safe void multiply(Matrix& other, Matrix& result) {
        parallel_for(0, 100, {
            for (int j = 0; j < 100; j++) {
                result.data[i][j] = 0;
                for (int k = 0; k < 100; k++) {
                    result.data[i][j] += data[i][k] * other.data[k][j];
                }
            }
        });
    }
    
    void parallel_process() {
        parallel_invoke([&]() {
            this->normalize();
        }, [&]() {
            this->validate();
        });
    }
};
```

## ğŸ¯ ç¼–è¯‘æµç¨‹

```
C++ æºç  (.pcpp)
    â†“
C++ è¯æ³•åˆ†æ (æ”¯æŒç±»ã€ç»§æ‰¿ç­‰å…³é”®å­—)
    â†“
C++ è¯­æ³•åˆ†æ (æ„å»º C++ AST)
    â†“
C++ è¯­ä¹‰åˆ†æ (ç±»å‹ç³»ç»Ÿã€ç»§æ‰¿æ£€æŸ¥)
    â†“
C ä»£ç ç”Ÿæˆ (è™šå‡½æ•°è¡¨ã€æ„é€ ææ„)
    â†“
æ ‡å‡† C ä»£ç  (.c)
```

## ğŸ”¨ æ„å»ºå’Œä½¿ç”¨

### æ„å»ºç¼–è¯‘å™¨
```bash
# Linux/Mac
make

# Windows
build.bat
```

### ç¼–è¯‘ C++ ç¨‹åº
```bash
# ç¼–è¯‘ ParallelC++ åˆ° C
./pcpp source.pcpp -o output.c

# ç¼–è¯‘ç”Ÿæˆçš„ C ä»£ç 
gcc -pthread -o program output.c

# è¿è¡Œç¨‹åº
./program
```

## ğŸ§ª æµ‹è¯•
```bash
# è¿è¡Œæµ‹è¯•å¥—ä»¶
./test.sh      # Linux/Mac
./test.ps1     # Windows
```

## ğŸ’¡ å®ç°ç‰¹ç‚¹

### C++ åˆ° C çš„è½¬æ¢
- **ç±»**: è½¬æ¢ä¸ºç»“æ„ä½“ + å‡½æ•°æŒ‡é’ˆï¼ˆè™šå‡½æ•°è¡¨ï¼‰
- **ç»§æ‰¿**: ç»“æ„ä½“åµŒå¥— + è™šå‡½æ•°è¡¨ç»§æ‰¿
- **æ„é€ å‡½æ•°**: è½¬æ¢ä¸ºåˆå§‹åŒ–å‡½æ•°
- **ææ„å‡½æ•°**: è½¬æ¢ä¸ºæ¸…ç†å‡½æ•°
- **æˆå‘˜å‡½æ•°**: è½¬æ¢ä¸ºä»¥ this æŒ‡é’ˆä¸ºé¦–å‚æ•°çš„å‡½æ•°
- **æ“ä½œç¬¦é‡è½½**: è½¬æ¢ä¸ºå‘½åå‡½æ•°

### å¹¶è¡Œæ‰©å±•å®ç°
- **parallel_for**: åœ¨ç±»æ–¹æ³•ä¸­æ”¯æŒ this æŒ‡é’ˆä¼ é€’
- **parallel_class**: è‡ªåŠ¨ç”Ÿæˆçº¿ç¨‹å®‰å…¨çš„è®¿é—®æ–¹æ³•
- **thread_safe**: æ·»åŠ äº’æ–¥é”ä¿æŠ¤
- **parallel_invoke**: åˆ›å»ºå¹¶è¡Œä»»åŠ¡æ‰§è¡Œ lambda è¡¨è¾¾å¼

---

**ParallelC++**: å°† C++ çš„å¼ºå¤§ç‰¹æ€§ä¸å¹¶è¡Œè®¡ç®—å®Œç¾ç»“åˆ! ğŸš€
